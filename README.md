# AIHubMix 图片生成器

这是一个基于 Node.js 的 Web 应用，用于调用 AIHubMix 的图片生成 API。支持多种 AI 模型和丰富的参数配置。

## 功能特性

- 🎨 支持多个 AI 图像生成模型
  - OpenAI (GPT-Image, DALL-E 3)
  - Google Imagen (4.0 系列)
  - Qwen (文生图、图像编辑)
  - Doubao SeeDream (4.0, 4.5)
  - Flux (2-Flex, 2-Pro, Kontext)
  - iRAG (百度)
  - Ideogram V3

- 📱 响应式设计，支持移动端和桌面端
- ⚙️ 完整的参数配置
  - 基础参数：提示词、参考图片、尺寸、数量、质量
  - 模型特定参数：保真度、审核、种子、水印等
- 🔄 支持异步任务轮询 (Flux 模型)
- 🖼️ 多图展示和下载

## 支持的功能模式

1. **文生图** - 根据文字描述生成图片
2. **图生图** - 基于参考图片生成新图片
3. **图像编辑** - 编辑现有图片
4. **多图融合** - 融合多张参考图片
5. **组图生成** - 一次生成多张相关图片

## 安装步骤

### 1. 安装依赖

```bash
cd aihubmix-image-gen
npm install
```

### 2. 配置环境变量

复制 `.env.example` 为 `.env` 并填入您的 API Key：

```bash
cp .env.example .env
```

编辑 `.env` 文件：

```
AIHUBMIX_API_KEY=sk-your-actual-api-key-here
PORT=3000
```

### 3. 启动服务器

```bash
npm start
```

服务器将在 http://localhost:3000 启动

## 使用说明

### 基础使用流程

1. 选择模型供应商（如 OpenAI, Google, Qwen 等）
2. 选择具体模型
3. 输入提示词描述您想要生成的图片
4. （可选）配置高级参数
5. 点击"生成图片"按钮
6. 等待生成完成，查看和下载结果

### 参数说明

#### 通用参数

- **提示词** (必填): 描述您想要生成的图片内容
- **参考图片 URL**: 用于图生图模式，提供参考图片的 URL
- **图片尺寸**: 支持多种尺寸，如 1K, 2K, 4K, 1024x1024 等
- **生成数量**: 一次生成 1-10 张图片
- **渲染质量**: 低/中/高，质量越高耗时越长

#### OpenAI 特定参数

- **输入保真度**: 控制对输入的保真程度
- **内容审核**: 控制内容审核的严格程度
- **输出格式**: JPEG, PNG, WebP

#### Flux 特定参数

- **审核宽松度**: 0-5，数值越大越宽松
- **宽高比**: 16:9, 1:1, 4:3, 2:3
- **随机种子**: 固定种子可获得可重复的结果
- **原始模式**: 启用后获得更自然的视觉效果

#### Qwen 特定参数

- **水印**: 是否在图片上添加水印
- **随机种子**: 0-2147483647

#### Doubao 特定参数

- **组图功能**: 控制是否生成组图
- **最大图片数**: 组图模式下最多生成的图片数量 (1-15)
- **随机种子**: -1 至 2147483647
- **返回格式**: URL 链接或 Base64 编码

#### Ideogram 特定参数

- **渲染速度**: 质量优先或速度优先
- **宽高比**: 多种宽高比选项

## 项目结构

```
aihubmix-image-gen/
├── server.js           # Node.js 服务器
├── package.json        # 项目配置和依赖
├── .env.example        # 环境变量模板
├── .env               # 环境变量配置 (需自行创建)
├── public/            # 前端静态文件
│   ├── index.html     # 主页面
│   └── app.js         # 前端 JavaScript
└── README.md          # 项目说明
```

## API 端点

### POST /api/generate

生成图片

**请求体:**
```json
{
  "model": "openai/gpt-image-1.5",
  "input": {
    "prompt": "描述文字",
    "size": "1024x1024",
    "n": 1
  }
}
```

### GET /api/tasks/:taskId

查询异步任务状态 (用于 Flux 等异步模型)

## 注意事项

1. **API Key 安全**: 不要将 API Key 提交到版本控制系统
2. **费用**: 图片生成会消耗 API 配额，请注意使用量
3. **图片链接有效期**: 某些模型返回的图片链接有时效性（如 24 小时），请及时下载
4. **网络要求**: 
   - 某些模型的图片链接可能需要代理才能访问
   - Flux 模型为异步接口，需要轮询获取结果
5. **参数限制**: 不同模型支持的参数不同，详见文档

## 常见问题

**Q: 如何获取 API Key?**

A: 访问 [AIHubMix 官网](https://aihubmix.com) 注册账户并获取 API Key

**Q: 为什么图片显示失败?**

A: 可能原因：
- 图片链接已过期
- 需要代理网络访问
- API 请求失败

**Q: Flux 模型为什么需要等待?**

A: Flux 模型使用异步接口，需要先提交任务，然后轮询获取结果。通常几秒内即可完成。

**Q: 可以同时使用多个模型吗?**

A: 每次请求只能使用一个模型，但可以连续发起多个请求。

## 技术栈

- **后端**: Node.js, Express
- **HTTP 客户端**: Axios
- **前端**: 原生 JavaScript, HTML5, CSS3
- **环境变量**: dotenv

## 开发建议

- 建议使用 Node.js 16+ 版本
- 开发时可以使用 nodemon 实现热重载
- 生产环境建议使用 PM2 等进程管理工具

## 许可证

MIT License

## 相关链接

- [AIHubMix 官网](https://aihubmix.com)
- [API 文档](https://docs.aihubmix.com)
